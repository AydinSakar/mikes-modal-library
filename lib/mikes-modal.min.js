!function(e,t,n){function r(e,n){var r=t.createElement(e||"div"),i;for(i in n)r[i]=n[i];return r}function i(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function s(e,t,n,r){var i=["opacity",t,~~(e*100),n,r].join("-"),s=.01+n/r*100,o=Math.max(1-(1-e)/t*(100-s),e),u=h.substring(0,h.indexOf("Animation")).toLowerCase(),a=u&&"-"+u+"-"||"";return c[i]||(p.insertRule("@"+a+"keyframes "+i+"{"+"0%{opacity:"+o+"}"+s+"%{opacity:"+e+"}"+(s+.01)+"%{opacity:1}"+(s+t)%100+"%{opacity:"+e+"}"+"100%{opacity:"+o+"}"+"}",p.cssRules.length),c[i]=1),i}function o(e,t){var r=e.style,i,s;if(r[t]!==n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(s=0;s<l.length;s++){i=l[s]+t;if(r[i]!==n)return i}}function u(e,t){for(var n in t)e.style[o(e,n)||n]=t[n];return e}function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]===n&&(e[i]=r[i])}return e}function f(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}var l=["webkit","Moz","ms","O"],c={},h,p=function(){var e=r("style",{type:"text/css"});return i(t.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),d={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},v=function m(e){if(!this.spin)return new m(e);this.opts=a(e||{},m.defaults,d)};v.defaults={},a(v.prototype,{spin:function(e){this.stop();var t=this,n=t.opts,i=t.el=u(r(0,{className:n.className}),{position:"relative",width:0,zIndex:n.zIndex}),s=n.radius+n.length+n.width,o,a;e&&(e.insertBefore(i,e.firstChild||null),a=f(e),o=f(i),u(i,{left:(n.left=="auto"?a.x-o.x+(e.offsetWidth>>1):parseInt(n.left,10)+s)+"px",top:(n.top=="auto"?a.y-o.y+(e.offsetHeight>>1):parseInt(n.top,10)+s)+"px"})),i.setAttribute("aria-role","progressbar"),t.lines(i,t.opts);if(!h){var l=0,c=n.fps,p=c/n.speed,d=(1-n.opacity)/(p*n.trail/100),v=p/n.lines;(function m(){l++;for(var e=n.lines;e;e--){var r=Math.max(1-(l+e*v)%p*d,n.opacity);t.opacity(i,n.lines-e,r,n)}t.timeout=t.el&&setTimeout(m,~~(1e3/c))})()}return t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=n),this},lines:function(e,t){function n(e,n){return u(r(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*o+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.corners*t.width>>1)+"px"})}var o=0,a;for(;o<t.lines;o++)a=u(r(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:h&&s(t.opacity,t.trail,o,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&i(a,u(n("#000","0 0 4px #000"),{top:"2px"})),i(e,i(a,n(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),function(){function e(e,t){return r("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}var t=u(r("group"),{behavior:"url(#default#VML)"});!o(t,"transform")&&t.adj?(p.addRule(".spin-vml","behavior:url(#default#VML)"),v.prototype.lines=function(t,n){function r(){return u(e("group",{coordsize:a+" "+a,coordorigin:-o+" "+ -o}),{width:a,height:a})}function s(t,s,a){i(l,i(u(r(),{rotation:360/n.lines*t+"deg",left:~~s}),i(u(e("roundrect",{arcsize:n.corners}),{width:o,height:n.width,left:n.radius,top:-n.width>>1,filter:a}),e("fill",{color:n.color,opacity:n.opacity}),e("stroke",{opacity:0}))))}var o=n.length+n.width,a=2*o,f=-(n.width+n.length)*2+"px",l=u(r(),{position:"absolute",top:f,left:f}),c;if(n.shadow)for(c=1;c<=n.lines;c++)s(c,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(c=1;c<=n.lines;c++)s(c);return i(t,l)},v.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}):h=o(t,"animation")}(),typeof define=="function"&&define.amd?define(function(){return v}):e.Spinner=v}(window,document);(function(){var e,t,n,r,i=function(e,t){return function(){return e.apply(t,arguments)}};$.fn.mikesModal=function(e){return this.modal=new t($(this))};t=function(){function t(e){this.addClose=i(this.addClose,this);this.marginLeft=i(this.marginLeft,this);this.marginTop=i(this.marginTop,this);this.imageMaxHeight=i(this.imageMaxHeight,this);this.imageMaxWidth=i(this.imageMaxWidth,this);this.triggerClose=i(this.triggerClose,this);this.imagePosition=i(this.imagePosition,this);this.imageLoaded=i(this.imageLoaded,this);this.loaded=i(this.loaded,this);this.closed=i(this.closed,this);this.opened=i(this.opened,this);this.bindMethods=i(this.bindMethods,this);this.createAllClasses=i(this.createAllClasses,this);this.modalBox=e;this.bindMethods();this.createAllClasses();this.modalBox.trigger("open");this.imageLoaded();this.addClose();this.triggerClose()}t.prototype.createAllClasses=function(){new n(this.modalBox);new e(this.modalBox);return new r(this.modalBox)};t.prototype.bindMethods=function(){this.opened();this.loaded();return this.closed()};t.prototype.opened=function(){var e=this;return this.modalBox.bind("open",function(){return e.modalBox.find("img").css({"max-width":e.imageMaxWidth(),"max-height":e.imageMaxHeight()})})};t.prototype.closed=function(){var e=this;return this.modalBox.bind("close",function(){return e.modalBox.hide()})};t.prototype.loaded=function(){var e=this;return this.modalBox.bind("loaded",function(){return e.modalBox.fadeIn("slow")})};t.prototype.imageLoaded=function(){var e=this;this.modalBox.find("img").first().load(function(){return e.imagePosition()});if(this.modalBox.find("img")[0].complete){return this.imagePosition()}};t.prototype.imagePosition=function(){this.modalBox.trigger("loaded").css({"margin-top":this.marginTop(),"margin-left":this.marginLeft()});this.modalBox.css({"margin-top":this.marginTop(),"margin-left":this.marginLeft()});return this.modalBox.css({"margin-top":this.marginTop(),"margin-left":this.marginLeft()})};t.prototype.triggerClose=function(){var e=this;$(document).keyup(function(t){if(t.keyCode===27){return e.modalBox.trigger("close")}});$(document).click(function(t){if(t.target.id==="the-lights"){return e.modalBox.trigger("close")}});return this.modalBox.find(".close").click(function(){return e.modalBox.trigger("close")})};t.prototype.imageMaxWidth=function(){return window.innerWidth*.8-300};t.prototype.imageMaxHeight=function(){return window.innerHeight*.8};t.prototype.marginTop=function(){return"-"+this.modalBox.height()/2+"px"};t.prototype.marginLeft=function(){return"-"+this.modalBox.width()/2+"px"};t.prototype.addClose=function(){return $(".description h1").before("<div class='close'>x</div>")};return t}();r=function(){function e(e){this.bindClosed=i(this.bindClosed,this);this.bindLoaded=i(this.bindLoaded,this);this.modalBox=e;this.bindLoaded();this.bindClosed()}e.prototype.bindLoaded=function(){var e=this;return this.modalBox.bind("loaded",function(){if($("#the-lights").length){return e.theLights=$("#the-lights")}else{e.theLights=$("<div id='the-lights'></div>");return e.theLights.appendTo("body").css({height:$(document).height()})}})};e.prototype.bindClosed=function(){var e=this;return this.modalBox.bind("close",function(){return e.theLights.remove()})};return e}();n=function(){function e(e){this.bindClosed=i(this.bindClosed,this);this.bindLoaded=i(this.bindLoaded,this);this.modalBox=e;this.bindLoaded();this.bindClosed();this.html=$("html")}e.prototype.bindLoaded=function(){var e=this;return this.modalBox.bind("loaded",function(){return e.html.css("overflow","hidden")})};e.prototype.bindClosed=function(){var e=this;return this.modalBox.bind("close",function(){return e.html.css("overflow","auto")})};return e}();e=function(){function e(e){this.opts=i(this.opts,this);this.bindLoaded=i(this.bindLoaded,this);this.bindOpened=i(this.bindOpened,this);this.modalBox=e;this.bindOpened();this.bindLoaded()}e.prototype.bindOpened=function(){var e=this;return this.modalBox.bind("open",function(){var t;e.loading=$("<div id='loading-modal'></div>");e.loading.appendTo("body").css({top:$(window).scrollTop()+300+"px"});return t=(new Spinner(e.opts())).spin(document.getElementById("loading-modal"))})};e.prototype.bindLoaded=function(){var e=this;return this.modalBox.bind("loaded",function(){return e.loading.remove()})};e.prototype.opts=function(){return{lines:9,length:30,width:20,radius:40,corners:1,rotate:19,color:"#fff",speed:1.2,trail:42,shadow:false,hwaccel:false,className:"spinner",zIndex:2e9,top:"auto",left:"auto"}};return e}()}).call(this)
